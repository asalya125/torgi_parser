#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
–ü–ê–†–°–ï–† –°–ê–ô–¢–ê TORGI.ORG
========================

–≠—Ç–æ —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø–∞—Ä—Å–µ—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏.
–ö–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–µ–ª–∞–µ—Ç –æ–¥–Ω—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥:
1. –õ–µ–≥—á–µ –ø–æ–Ω–∏–º–∞—Ç—å
2. –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å  
3. –õ–µ–≥—á–µ –∏–∑–º–µ–Ω—è—Ç—å
4. –õ–µ–≥—á–µ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –æ—à–∏–±–∫–∏

–û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê –†–ê–ë–û–¢–´:
1. –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Å–∞–π—Ç–∞
2. –ù–∞—Ö–æ–¥–∏–º —Ç–∞–±–ª–∏—Ü—É —Å –ª–æ—Ç–∞–º–∏
3. –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã
4. –°–æ—Ä—Ç–∏—Ä—É–µ–º –ª–æ—Ç—ã –ø–æ —Ü–µ–Ω–µ
5. –§–∏–ª—å—Ç—Ä—É–µ–º –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É —Ü–µ–Ω
6. –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
"""

# –ò–ú–ü–û–†–¢ –ë–ò–ë–õ–ò–û–¢–ï–ö
# ============================================================
from bs4 import BeautifulSoup  # –î–ª—è —Ä–∞–±–æ—Ç—ã —Å HTML (–ø–∞—Ä—Å–∏–Ω–≥)
import requests                # –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–∞–π—Ç—É
import re                      # –î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏


def parse_price(price_text):
    """
    –ü–†–ï–û–ë–†–ê–ó–û–í–ê–ù–ò–ï –¢–ï–ö–°–¢–ê –¶–ï–ù–´ –í –ß–ò–°–õ–û
    ============================================
    
    –ü–†–ò–ú–ï–†–´:
    - –í—Ö–æ–¥: "2 662 880.00 —Ä—É–±." ‚Üí –í—ã—Ö–æ–¥: 2662880.0
    - –í—Ö–æ–¥: "1,500,000 —Ä—É–±" ‚Üí –í—ã—Ö–æ–¥: 1500000.0
    - –í—Ö–æ–¥: "590000 —Ä—É–±" ‚Üí –í—ã—Ö–æ–¥: 590000.0
    
    –ê–õ–ì–û–†–ò–¢–ú:
    1. –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –ø—É—Å—Ç–æ–π ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ–º 0
    2. –ó–∞–º–µ–Ω—è–µ–º –∑–∞–ø—è—Ç—ã–µ –Ω–∞ —Ç–æ—á–∫–∏ (–¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è)
    3. –£–¥–∞–ª—è–µ–º –í–°–ï —Å–∏–º–≤–æ–ª—ã –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä (0-9) –∏ —Ç–æ—á–µ–∫ (.)
    4. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–ª—É—á–∞–∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ç–æ—á–∫–∞–º–∏
    5. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Ç—Ä–æ–∫—É –≤ —á–∏—Å–ª–æ float
    
    –ü–ê–†–ê–ú–ï–¢–†–´:
    - price_text: —Å—Ç—Ä–æ–∫–∞ —Å —Ü–µ–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä "2 662 880.00 —Ä—É–±")
    
    –í–û–ó–í–†–ê–©–ê–ï–¢:
    - –ß–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π (float) –∏–ª–∏ 0 –ø—Ä–∏ –æ—à–∏–±–∫–µ
    """
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
    if not price_text:
        return 0
    
    # 1. –ó–∞–º–µ–Ω—è–µ–º –∑–∞–ø—è—Ç—ã–µ –Ω–∞ —Ç–æ—á–∫–∏ (—Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —á–∏—Å–µ–ª)
    #    –ü—Ä–∏–º–µ—Ä: "1,500,000" ‚Üí "1.500.000"
    # 2. re.sub(r'[^\d.]', '', ...) —É–¥–∞–ª—è–µ—Ç –í–°–ï —Å–∏–º–≤–æ–ª—ã –∫—Ä–æ–º–µ:
    #    - \d - —Ü–∏—Ñ—Ä—ã (0-9)
    #    - .  - —Ç–æ—á–∫–∏
    #    [^...] –æ–∑–Ω–∞—á–∞–µ—Ç "–ù–ï —ç—Ç–∏ —Å–∏–º–≤–æ–ª—ã"
    clean = re.sub(r'[^\d.]', '', price_text.replace(',', '.'))
    
    # –ï—Å–ª–∏ –≤ —Å—Ç—Ä–æ–∫–µ –µ—Å—Ç—å —Ç–æ—á–∫–∞, –∑–Ω–∞—á–∏—Ç –µ—Å—Ç—å –¥–µ—Å—è—Ç–∏—á–Ω–∞—è —á–∞—Å—Ç—å
    # –ü—Ä–∏–º–µ—Ä: "2662.880.00" –Ω—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ "2662880.00"
    if '.' in clean:
        parts = clean.split('.')           # –†–∞–∑–±–∏–≤–∞–µ–º –ø–æ —Ç–æ—á–∫–∞–º
        # parts[0] - —Ü–µ–ª–∞—è —á–∞—Å—Ç—å ("2662")
        # ''.join(parts[1:]) - –æ–±—ä–µ–¥–∏–Ω—è–µ–º –æ—Å—Ç–∞–ª—å–Ω–æ–µ –∫–∞–∫ –¥—Ä–æ–±–Ω—É—é —á–∞—Å—Ç—å ("88000")
        clean = parts[0] + '.' + ''.join(parts[1:])
    
    # –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –≤ —á–∏—Å–ª–æ
    try:
        return float(clean) if clean else 0
    except:
        # –ï—Å–ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)
        return 0


def find_data_in_cell(cell):
    """
    –ê–ù–ê–õ–ò–ó –û–î–ù–û–ô –Ø–ß–ï–ô–ö–ò –¢–ê–ë–õ–ò–¶–´
    ============================================
    
    –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –≤ —è—á–µ–π–∫–µ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
    1. –≠—Ç–æ —Ü–µ–Ω–∞? (—Ç–µ–∫—Å—Ç —Å "—Ä—É–±" –∏ —Ü–∏—Ñ—Ä–∞–º–∏)
    2. –≠—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–æ—Ç–∞? (–¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –±–µ–∑ –¥–∞—Ç—ã)
    3. –≠—Ç–æ —Ä–µ–≥–∏–æ–Ω? (–∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç —Å "–æ–±–ª", "–≥.", "–†–µ—Å–ø")
    
    –ï—Å–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç —á—Ç–æ-—Ç–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å —Å –Ω–∞–π–¥–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.
    
    –ü–ê–†–ê–ú–ï–¢–†–´:
    - cell: –æ–±—ä–µ–∫—Ç BeautifulSoup —Å —è—á–µ–π–∫–æ–π —Ç–∞–±–ª–∏—Ü—ã (<td> –∏–ª–∏ <th>)
    
    –í–û–ó–í–†–ê–©–ê–ï–¢:
    - –°–ª–æ–≤–∞—Ä—å —Å –Ω–∞–π–¥–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:
      {'price_text': '2 662 880.00 —Ä—É–±', 'price': 2662880.0}
      –∏–ª–∏
      {'name': '–ó–µ–º–µ–ª—å–Ω—ã–π —É—á–∞—Å—Ç–æ–∫...', 'link': 'https://...'}
    """
    
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç –∏–∑ —è—á–µ–π–∫–∏, —É–¥–∞–ª—è—è –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã
    text = cell.get_text(strip=True)
    
    # –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    data = {}
    
    # 1. –ü–û–ò–°–ö –¶–ï–ù–´
    # ========================================
    # –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏—â–µ—Ç:
    # \d        - –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ü–∏—Ñ—Ä—ã
    # [\d\s.]*  - –ª—é–±—ã–µ —Ü–∏—Ñ—Ä—ã, –ø—Ä–æ–±–µ–ª—ã –∏–ª–∏ —Ç–æ—á–∫–∏
    # —Ä—É–±       - —Å–ª–æ–≤–æ "—Ä—É–±" (—Ä–µ.–ò - –±–µ–∑ —É—á–µ—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞)
    if re.search(r'\d[\d\s.]*—Ä—É–±', text, re.I):
        data['price_text'] = text              # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç
        data['price'] = parse_price(text)      # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —á–∏—Å–ª–æ
    
    # 2. –ü–û–ò–°–ö –ù–ê–ó–í–ê–ù–ò–Ø –õ–û–¢–ê
    # ========================================
    # –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—Ç—å –¢–†–ï–ú —É—Å–ª–æ–≤–∏—è–º:
    # 1. len(text) > 30         - –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –æ–ø–∏—Å–∞–Ω–∏–µ)
    # 2. 'price_text' not in data - –µ—â–µ –Ω–µ –Ω–∞—à–ª–∏ —Ü–µ–Ω—É –≤ —ç—Ç–æ–π —è—á–µ–π–∫–µ
    # 3. not re.search(r'\d{2}-\d{2}-\d{4}', text) - –Ω–µ –¥–∞—Ç–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –î–î-–ú–ú-–ì–ì–ì–ì
    elif len(text) > 30 and 'price_text' not in data and not re.search(r'\d{2}-\d{2}-\d{4}', text):
        data['name'] = text  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ
        
        # –ò—â–µ–º —Å—Å—ã–ª–∫—É –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π —è—á–µ–π–∫–∏
        # <a href="...">...</a> - —Ç–µ–≥ —Å—Å—ã–ª–∫–∏ –≤ HTML
        link = cell.find('a', href=True)
        
        if link and link.get('href'):
            href = link.get('href')  # –ü–æ–ª—É—á–∞–µ–º –∞–¥—Ä–µ—Å —Å—Å—ã–ª–∫–∏
            
            # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –≤ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ:
            if href.startswith('/'):
                # –°—Å—ã–ª–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å / ‚Üí –¥–æ–±–∞–≤–ª—è–µ–º –¥–æ–º–µ–Ω
                # –ü—Ä–∏–º–µ—Ä: "/page.php" ‚Üí "https://torgi.org/page.php"
                data['link'] = 'https://torgi.org' + href
            elif href.startswith('?'):
                # –°—Å—ã–ª–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å ? ‚Üí –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
                # –ü—Ä–∏–º–µ—Ä: "?id=123" ‚Üí "https://torgi.org/index.php?id=123"
                data['link'] = 'https://torgi.org/index.php' + href
            elif href.startswith('index.php'):
                # –°—Å—ã–ª–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å index.php
                # –ü—Ä–∏–º–µ—Ä: "index.php?id=123" ‚Üí "https://torgi.org/index.php?id=123"
                data['link'] = 'https://torgi.org/' + href
    
    # 3. –ü–û–ò–°–ö –†–ï–ì–ò–û–ù–ê
    # ========================================
    # –†–µ–≥–∏–æ–Ω –¥–æ–ª–∂–µ–Ω —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—Ç—å –î–í–£–ú —É—Å–ª–æ–≤–∏—è–º:
    # 1. len(text) < 30 - –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç
    # 2. re.search(r'[–ê-–Ø][–∞-—è]+\s*(–æ–±–ª|–∫—Ä–∞–π|—Ä–µ—Å–ø|–≥\.)', text) - —Å–æ–¥–µ—Ä–∂–∏—Ç:
    #    [–ê-–Ø][–∞-—è]+     - –∑–∞–≥–ª–∞–≤–Ω–∞—è –±—É–∫–≤–∞, –ø–æ—Ç–æ–º –º–∞–ª–µ–Ω—å–∫–∏–µ ("–ú–æ—Å–∫–æ–≤—Å–∫–∞—è")
    #    \s*             - –ø—Ä–æ–±–µ–ª—ã
    #    (–æ–±–ª|–∫—Ä–∞–π|—Ä–µ—Å–ø|–≥\.) - "–æ–±–ª" –ò–õ–ò "–∫—Ä–∞–π" –ò–õ–ò "—Ä–µ—Å–ø" –ò–õ–ò "–≥."
    elif len(text) < 30 and re.search(r'[–ê-–Ø][–∞-—è]+\s*(–æ–±–ª|–∫—Ä–∞–π|—Ä–µ—Å–ø|–≥\.)', text):
        data['region'] = text  # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–≥–∏–æ–Ω
    
    return data


def parse_lots_from_table(table):
    """
    –ò–ó–í–õ–ï–ß–ï–ù–ò–ï –õ–û–¢–û–í –ò–ó –¢–ê–ë–õ–ò–¶–´
    ============================================
    
    –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –í–°–ï–ú —Å—Ç—Ä–æ–∫–∞–º —Ç–∞–±–ª–∏—Ü—ã –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ª–æ—Ç–∞—Ö.
    
    –ê–õ–ì–û–†–ò–¢–ú:
    1. –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ (<tr>) –≤ —Ç–∞–±–ª–∏—Ü–µ
    2. –ù–∞–π—Ç–∏ –≤—Å–µ —è—á–µ–π–∫–∏ (<td> –∏–ª–∏ <th>)
    3. –ï—Å–ª–∏ —è—á–µ–µ–∫ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (–±–æ–ª—å—à–µ 5) - —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ —Å –ª–æ—Ç–æ–º
    4. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é —è—á–µ–π–∫—É —Å –ø–æ–º–æ—â—å—é find_data_in_cell()
    5. –°–æ–±—Ä–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –æ–¥–∏–Ω —Å–ª–æ–≤–∞—Ä—å
    6. –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —Ü–µ–Ω–∞ > 0 - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ—Ç
    
    –ü–ê–†–ê–ú–ï–¢–†–´:
    - table: –æ–±—ä–µ–∫—Ç BeautifulSoup —Å —Ç–∞–±–ª–∏—Ü–µ–π (<table>)
    
    –í–û–ó–í–†–ê–©–ê–ï–¢:
    - –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π, –∫–∞–∂–¥—ã–π —Å–ª–æ–≤–∞—Ä—å - –æ–¥–∏–Ω –ª–æ—Ç
    """
    
    # –°–ø–∏—Å–æ–∫ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ª–æ—Ç–æ–≤
    lots = []
    
    # –¶–∏–∫–ª –ø–æ –í–°–ï–ú —Å—Ç—Ä–æ–∫–∞–º —Ç–∞–±–ª–∏—Ü—ã
    # <tr> = table row (—Å—Ç—Ä–æ–∫–∞ —Ç–∞–±–ª–∏—Ü—ã)
    for row in table.find_all('tr'):
        
        # –ù–∞—Ö–æ–¥–∏–º –í–°–ï —è—á–µ–π–∫–∏ –≤ —Å—Ç—Ä–æ–∫–µ
        # <td> = table data (–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã)
        # <th> = table header (–∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü—ã)
        cells = row.find_all(['td', 'th'])
        
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å—Ç—Ä–æ–∫–∏ —Å –º–∞–ª—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —è—á–µ–µ–∫
        # (—ç—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫—ã –∏–ª–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏)
        if len(cells) < 6:
            continue  # continue –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Ü–∏–∫–ª–∞
        
        # –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—É—â–µ–≥–æ –ª–æ—Ç–∞
        # –í—Å–µ –ø–æ–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—É—Å—Ç—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
        lot_data = {
            'name': '',       # –ù–∞–∑–≤–∞–Ω–∏–µ –ª–æ—Ç–∞
            'region': '',     # –†–µ–≥–∏–æ–Ω
            'price': 0,       # –¶–µ–Ω–∞ –∫–∞–∫ —á–∏—Å–ª–æ
            'link': '',       # –°—Å—ã–ª–∫–∞ –Ω–∞ –ª–æ—Ç
            'price_text': ''  # –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç —Ü–µ–Ω—ã
        }
        
        # –ê–ù–ê–õ–ò–ó –ö–ê–ñ–î–û–ô –Ø–ß–ï–ô–ö–ò –í –°–¢–†–û–ö–ï
        # ========================================
        for cell in cells:
            # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é find_data_in_cell –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —è—á–µ–π–∫–∏
            found = find_data_in_cell(cell)
            
            # –û–±–Ω–æ–≤–ª—è–µ–º —Å–ª–æ–≤–∞—Ä—å lot_data –Ω–∞–π–¥–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
            for key in found:
                if key == 'price' and found[key] > 0:
                    # –î–ª—è —Ü–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ > 0
                    lot_data[key] = found[key]
                elif key != 'price':
                    # –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
                    lot_data[key] = found[key]
        
        # –ü–†–û–í–ï–†–ö–ê: –ï–°–¢–¨ –õ–ò –î–û–°–¢–ê–¢–û–ß–ù–û –î–ê–ù–ù–´–• –î–õ–Ø –°–û–•–†–ê–ù–ï–ù–ò–Ø –õ–û–¢–ê?
        # ========================================
        # –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ—Ç–∞ –Ω—É–∂–Ω–æ:
        # 1. lot_data['name'] –Ω–µ –ø—É—Å—Ç–æ–π (–µ—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ)
        # 2. lot_data['price'] > 0 (—Ü–µ–Ω–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è)
        if lot_data['name'] and lot_data['price'] > 0:
            
            # –ü–†–û–í–ï–†–ö–ê –ù–ê –î–£–ë–õ–ò–ö–ê–¢–´
            # ========================================
            # any() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç True –µ—Å–ª–∏ –•–û–¢–Ø –ë–´ –û–î–ò–ù —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ lots
            # —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—é –≤ —Å–∫–æ–±–∫–∞—Ö
            # –£—Å–ª–æ–≤–∏–µ: l['name'] == lot_data['name']
            # "–ï—Å—Ç—å –ª–∏ —É–∂–µ –ª–æ—Ç —Å —Ç–∞–∫–∏–º –∂–µ –Ω–∞–∑–≤–∞–Ω–∏–µ–º?"
            if not any(l['name'] == lot_data['name'] for l in lots):
                
                # –î–æ–±–∞–≤–ª—è–µ–º –ª–æ—Ç –≤ —Å–ø–∏—Å–æ–∫
                lots.append(lot_data)
                
                # –í—ã–≤–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–π–¥–µ–Ω–Ω–æ–º –ª–æ—Ç–µ
                # {lot_data['price']:,.2f} - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—ã:
                #   , - —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å —Ç—ã—Å—è—á
                #   .2f - 2 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏
                # {lot_data['name'][:50]} - –ø–µ—Ä–≤—ã–µ 50 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞–∑–≤–∞–Ω–∏—è
                print(f"‚úÖ –õ–æ—Ç {len(lots)}: {lot_data['price']:,.2f} —Ä—É–± - {lot_data['name'][:50]}...")
    
    return lots


def filter_lots_by_price(lots, min_price=None, max_price=None):
    """
    –§–ò–õ–¨–¢–†–ê–¶–ò–Ø –õ–û–¢–û–í –ü–û –î–ò–ê–ü–ê–ó–û–ù–£ –¶–ï–ù
    ============================================
    
    –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –ª–æ—Ç—ã, —Ü–µ–Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è
    –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ [min_price, max_price].
    
    –ü–ê–†–ê–ú–ï–¢–†–´:
    - lots: —Å–ø–∏—Å–æ–∫ –ª–æ—Ç–æ–≤ (—Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π)
    - min_price: –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ (–∏–ª–∏ None - –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–Ω–∏–∑—É)
    - max_price: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ (–∏–ª–∏ None - –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–≤–µ—Ä—Ö—É)
    
    –í–û–ó–í–†–ê–©–ê–ï–¢:
    - –ù–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ —Å –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ª–æ—Ç–∞–º–∏
    
    –ü–†–ò–ú–ï–†–´:
    - filter_lots_by_price(lots, 1000000, 5000000) ‚Üí –ª–æ—Ç—ã –æ—Ç 1–º–ª–Ω –¥–æ 5–º–ª–Ω
    - filter_lots_by_price(lots, None, 1000000) ‚Üí –ª–æ—Ç—ã –¥–æ 1–º–ª–Ω
    - filter_lots_by_price(lots, 500000, None) ‚Üí –ª–æ—Ç—ã –æ—Ç 500—Ç—ã—Å
    """
    
    # –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ª–æ—Ç–æ–≤ –ø—É—Å—Ç–æ–π - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
    if not lots:
        return []
    
    # –°–ø–∏—Å–æ–∫ –¥–ª—è –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ—Ç–æ–≤
    filtered = []
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ö–ê–ñ–î–´–ô –ª–æ—Ç
    for lot in lots:
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ù–ò–ñ–ù–ï–ô –≥—Ä–∞–Ω–∏—Ü—ã
        # –ï—Å–ª–∏ min_price –∑–∞–¥–∞–Ω–∞ –ò —Ü–µ–Ω–∞ –ª–æ—Ç–∞ –º–µ–Ω—å—à–µ min_price
        # ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç –ª–æ—Ç (continue)
        if min_price and lot['price'] < min_price:
            continue  # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –ª–æ—Ç—É
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –í–ï–†–•–ù–ï–ô –≥—Ä–∞–Ω–∏—Ü—ã  
        # –ï—Å–ª–∏ max_price –∑–∞–¥–∞–Ω–∞ –ò —Ü–µ–Ω–∞ –ª–æ—Ç–∞ –±–æ–ª—å—à–µ max_price
        # ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç –ª–æ—Ç
        if max_price and lot['price'] > max_price:
            continue
        
        # –ï—Å–ª–∏ –ª–æ—Ç –ø—Ä–æ—à–µ–ª –í–°–ï –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Üí –¥–æ–±–∞–≤–ª—è–µ–º –≤ filtered
        filtered.append(lot)
    
    return filtered


def print_lots(lots, title):
    """
    –ö–†–ê–°–ò–í–´–ô –í–´–í–û–î –°–ü–ò–°–ö–ê –õ–û–¢–û–í
    ============================================
    
    –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∏ –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –ª–æ—Ç–æ–≤ –≤ —É–¥–æ–±–Ω–æ–º –≤–∏–¥–µ.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —ç–º–æ–¥–∑–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏.
    
    –ü–ê–†–ê–ú–ï–¢–†–´:
    - lots: —Å–ø–∏—Å–æ–∫ –ª–æ—Ç–æ–≤ –¥–ª—è –≤—ã–≤–æ–¥–∞
    - title: –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –≤—ã–≤–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä "–í–°–ï –õ–û–¢–´")
    
    –í–´–í–û–î–ò–¢:
    - –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ª–æ—Ç–æ–≤
    - –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –ª–∏–Ω–∏—é
    - –ö–∞–∂–¥—ã–π –ª–æ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
        ‚Ññ. üí∞ –¶–µ–Ω–∞ —Ä—É–±
           üìç –†–µ–≥–∏–æ–Ω (–µ—Å–ª–∏ –µ—Å—Ç—å)
           üè∑  –ù–∞–∑–≤–∞–Ω–∏–µ...
           üîó –°—Å—ã–ª–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
        ----------------------------
    """
    
    # –ï—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç–æ–π - –≤—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –≤—ã—Ö–æ–¥–∏–º
    if not lots:
        print(f"‚ùå {title}: –ª–æ—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")
        return
    
    # –í–´–í–û–î –ó–ê–ì–û–õ–û–í–ö–ê
    # ========================================
    print(f"\n{title}: –ù–∞–π–¥–µ–Ω–æ {len(lots)} –ª–æ—Ç–æ–≤")
    print("=" * 100)  # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è –∏–∑ 100 –∑–Ω–∞–∫–æ–≤ "="
    
    # –í–´–í–û–î –ö–ê–ñ–î–û–ì–û –õ–û–¢–ê
    # ========================================
    # enumerate(lots, 1) –¥–∞–µ—Ç –ø–∞—Ä—ã: (–Ω–æ–º–µ—Ä, –ª–æ—Ç)
    # 1 - –Ω–∞—á–∞—Ç—å –Ω—É–º–µ—Ä–∞—Ü–∏—é —Å 1 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å 0)
    for i, lot in enumerate(lots, 1):
        
        # 1. –í–´–í–û–î –¶–ï–ù–´
        # {i:2d} - –Ω–æ–º–µ—Ä —à–∏—Ä–∏–Ω–æ–π 2 —Å–∏–º–≤–æ–ª–∞, –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é
        # {lot['price']:12,.2f} - —Ü–µ–Ω–∞ —à–∏—Ä–∏–Ω–æ–π 12 —Å–∏–º–≤–æ–ª–æ–≤:
        #   , - —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å —Ç—ã—Å—è—á
        #   .2f - 2 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏
        print(f"{i:2d}. üí∞ {lot['price']:12,.2f} —Ä—É–±")
        
        # 2. –í–´–í–û–î –†–ï–ì–ò–û–ù–ê (–µ—Å–ª–∏ –µ—Å—Ç—å)
        if lot['region']:
            print(f"    üìç {lot['region']}")
        
        # 3. –í–´–í–û–î –ù–ê–ó–í–ê–ù–ò–Ø
        # {lot['name'][:80]} - –ø–µ—Ä–≤—ã–µ 80 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞–∑–≤–∞–Ω–∏—è
        print(f"    üè∑  {lot['name'][:80]}...")
        
        # 4. –í–´–í–û–î –°–°–´–õ–ö–ò (–µ—Å–ª–∏ –µ—Å—Ç—å)
        if lot['link']:
            print(f"    üîó {lot['link']}")
        
        # –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –º–µ–∂–¥—É –ª–æ—Ç–∞–º–∏
        print("-" * 100)


def main():
    """
    –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –ü–†–û–ì–†–ê–ú–ú–´
    ============================================
    
    –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —É–ø—Ä–∞–≤–ª—è–µ—Ç –í–°–ï–ô —Ä–∞–±–æ—Ç–æ–π –ø–∞—Ä—Å–µ—Ä–∞:
    1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É
    2. –ò—â–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Å –ª–æ—Ç–∞–º–∏
    3. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
    4. –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ª–æ—Ç—ã
    5. –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ —Ü–µ–Ω–µ
    6. –í—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    
    –í–°–ï –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –±–ª–æ–∫–µ try-except.
    """
    
    # –í–´–í–û–î –ó–ê–ì–û–õ–û–í–ö–ê –ü–†–û–ì–†–ê–ú–ú–´
    print("üîç –ü–ê–†–°–ï–† TORGI.ORG")
    print("=" * 50)
    
    # URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ª–æ—Ç–∞–º–∏
    url = "https://torgi.org/index.php?class=Auction&action=List&mod=Open&AuctionType=All"
    
    # –ë–õ–û–ö –û–ë–†–ê–ë–û–¢–ö–ò –û–®–ò–ë–û–ö
    try:
        # 1. –ó–ê–ì–†–£–ó–ö–ê –°–¢–†–ê–ù–ò–¶–´
        # ========================================
        # requests.get() –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å –∫ —Å–∞–π—Ç—É
        # headers={'User-Agent': 'Mozilla/5.0'} - –∏–º–∏—Ç–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
        # timeout=10 - –∂–¥–∞—Ç—å –æ—Ç–≤–µ—Ç–∞ –º–∞–∫—Å–∏–º—É–º 10 —Å–µ–∫—É–Ω–¥
        response = requests.get(url, 
                              headers={'User-Agent': 'Mozilla/5.0'}, 
                              timeout=10)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–≤–µ—Ç–∞ (200 - OK, 404 - –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, 500 - –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞)
        response.raise_for_status()
        
        print("‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞")
        
        # 2. –ü–ê–†–°–ò–ù–ì HTML
        # ========================================
        # BeautifulSoup –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç HTML-–∫–æ–¥ –≤ –¥–µ—Ä–µ–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤
        soup = BeautifulSoup(response.text, 'html.parser')
        
        # –ò—â–µ–º –í–°–ï —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        tables = soup.find_all('table')
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–∞—à–ª–æ—Å—å –ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–∞–±–ª–∏—Ü
        if len(tables) < 2:
            print("‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ —Ç–∞–±–ª–∏—Ü —Å –ª–æ—Ç–∞–º–∏")
            return  # –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏
        
        # 3. –ò–ó–í–õ–ï–ß–ï–ù–ò–ï –õ–û–¢–û–í –ò–ó –¢–ê–ë–õ–ò–¶–´
        # ========================================
        # tables[1] - –≤—Ç–æ—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ (–ø–µ—Ä–≤–∞—è —á–∞—Å—Ç–æ –±—ã–≤–∞–µ—Ç –º–µ–Ω—é –∏–ª–∏ —à–∞–ø–∫–∞)
        lots = parse_lots_from_table(tables[1])
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–∞—à–ª–∏ –ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ª–æ—Ç
        if not lots:
            print("‚ùå –õ–æ—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")
            return
        
        # 4. –°–û–†–¢–ò–†–û–í–ö–ê –õ–û–¢–û–í
        # ========================================
        # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ª–æ—Ç—ã –ø–æ —Ü–µ–Ω–µ –ø–æ —É–±—ã–≤–∞–Ω–∏—é
        # key=lambda x: x['price'] - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –ø–æ–ª—é 'price'
        # lambda x: x['price'] - –∫–æ—Ä–æ—Ç–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è: "–≤–æ–∑—å–º–∏ x, –≤–µ—Ä–Ω–∏ x['price']"
        # reverse=True - –ø–æ —É–±—ã–≤–∞–Ω–∏—é (–æ—Ç –±–æ–ª—å—à–µ–π —Ü–µ–Ω—ã –∫ –º–µ–Ω—å—à–µ–π)
        lots.sort(key=lambda x: x['price'], reverse=True)
        
        # 5. –í–´–í–û–î –í–°–ï–• –õ–û–¢–û–í
        # ========================================
        print_lots(lots, "üìä –í–°–ï –õ–û–¢–´")
        
        # 6. –§–ò–õ–¨–¢–†–ê–¶–ò–Ø –ü–û –¶–ï–ù–ï
        # ========================================
        print("\nüéØ –§–ò–õ–¨–¢–†–ê–¶–ò–Ø –ü–û –¶–ï–ù–ï")
        
        # –ë–ª–æ–∫ try-except –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        try:
            # –ó–ê–ü–†–û–° –ì–†–ê–ù–ò–¶ –§–ò–õ–¨–¢–†–ê–¶–ò–ò –£ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
            # ========================================
            # input() - –ø–æ–ª—É—á–∞–µ–º –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            # .strip() - —É–¥–∞–ª—è–µ–º –ø—Ä–æ–±–µ–ª—ã –≤ –Ω–∞—á–∞–ª–µ –∏ –∫–æ–Ω—Ü–µ
            min_input = input("–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ (—Ä—É–±, Enter - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å): ").strip()
            max_input = input("–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ (—Ä—É–±, Enter - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å): ").strip()
            
            # –ü–†–ï–û–ë–†–ê–ó–û–í–ê–ù–ò–ï –í–í–û–î–ê –í –ß–ò–°–õ–ê
            # ========================================
            # float(min_input) if min_input else None
            # –ï—Å–ª–∏ min_input –Ω–µ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —á–∏—Å–ª–æ
            # –ò–Ω–∞—á–µ ‚Üí None (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
            min_price = float(min_input) if min_input else None
            max_price = float(max_input) if max_input else None
            
            # –§–ò–õ–¨–¢–†–ê–¶–ò–Ø –õ–û–¢–û–í
            # ========================================
            filtered = filter_lots_by_price(lots, min_price, max_price)
            
            # –í–´–í–û–î –†–ï–ó–£–õ–¨–¢–ê–¢–û–í –§–ò–õ–¨–¢–†–ê–¶–ò–ò
            # ========================================
            print_lots(filtered, "üîç –û–¢–§–ò–õ–¨–¢–†–û–í–ê–ù–ù–´–ï –õ–û–¢–´")
            
        except ValueError:
            # –û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª –Ω–µ —á–∏—Å–ª–æ
            # –ù–∞–ø—Ä–∏–º–µ—Ä: "abc" –≤–º–µ—Å—Ç–æ "1000000"
            print("‚ùå –û—à–∏–±–∫–∞: –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ")
            
    # –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö –°–ï–¢–ò
    except requests.exceptions.RequestException as e:
        # –û—à–∏–±–∫–∏ —Å–µ—Ç–∏: –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, —Å–∞–π—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Ç–∞–π–º–∞—É—Ç
        print(f"‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: {e}")
    
    # –û–ë–†–ê–ë–û–¢–ö–ê –õ–Æ–ë–´–• –î–†–£–ì–ò–• –û–®–ò–ë–û–ö
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")


# –¢–û–ß–ö–ê –í–•–û–î–ê –ü–†–û–ì–†–ê–ú–ú–´
# ============================================================
# –≠—Ç–æ—Ç –∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¢–û–õ–¨–ö–û –µ—Å–ª–∏ —Ñ–∞–π–ª –∑–∞–ø—É—â–µ–Ω –Ω–∞–ø—Ä—è–º—É—é
# –ï—Å–ª–∏ —Ñ–∞–π–ª –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ –º–æ–¥—É–ª—å, —ç—Ç–æ—Ç –∫–æ–¥ –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
if __name__ == "__main__":
    main()
