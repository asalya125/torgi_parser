
# –ò–ú–ü–û–†–¢ –ë–ò–ë–õ–ò–û–¢–ï–ö
# ============================================
# BeautifulSoup - –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç HTML –≤ —É–¥–æ–±–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –ø–æ–∏—Å–∫–∞ –¥–∞–Ω–Ω—ã—Ö
# requests - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ —Å–∞–π—Ç–∞–º (–∫–∞–∫ –±—Ä–∞—É–∑–µ—Ä)
# re - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ (–ø–æ–∏—Å–∫ —à–∞–±–ª–æ–Ω–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ)
from bs4 import BeautifulSoup
import requests
import re


# –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ü–†–ï–û–ë–†–ê–ó–û–í–ê–ù–ò–Ø –¶–ï–ù–´ –ò–ó –¢–ï–ö–°–¢–ê –í –ß–ò–°–õ–û
# ============================================
def parse_price(price_text):
    """
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–µ–∫—Å—Ç —Ü–µ–Ω—ã –≤ —á–∏—Å–ª–æ
    
    –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã:
    –í—Ö–æ–¥: "2 662 880.00 —Ä—É–±."
    –í—ã—Ö–æ–¥: 2662880.0
    
    –®–∞–≥–∏:
    1. –ó–∞–º–µ–Ω—è–µ–º –∑–∞–ø—è—Ç—ã–µ –Ω–∞ —Ç–æ—á–∫–∏: "2 662 880.00 —Ä—É–±."
    2. –£–¥–∞–ª—è–µ–º –≤—Å—ë –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä –∏ —Ç–æ—á–µ–∫: "2662880.00"
    3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–ª—É—á–∞–∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ç–æ—á–∫–∞–º–∏
    4. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —á–∏—Å–ª–æ: 2662880.0
    """
    # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –ø—É—Å—Ç–æ–π - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º 0
    if not price_text:
        return 0
    
    # 1. –ó–∞–º–µ–Ω—è–µ–º –∑–∞–ø—è—Ç—ã–µ –Ω–∞ —Ç–æ—á–∫–∏ (—Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —á–∏—Å–µ–ª)
    # 2. re.sub(r'[^\d.]', '', ...) —É–¥–∞–ª—è–µ—Ç –í–°–ï —Å–∏–º–≤–æ–ª—ã –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä (\d) –∏ —Ç–æ—á–µ–∫ (.)
    #    ^ –≤–Ω—É—Ç—Ä–∏ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–æ–∫ –æ–∑–Ω–∞—á–∞–µ—Ç "–ù–ï"
    #    [^\d.] = "–ª—é–±–æ–π —Å–∏–º–≤–æ–ª, –∫–æ—Ç–æ—Ä—ã–π –ù–ï —Ü–∏—Ñ—Ä–∞ –∏ –ù–ï —Ç–æ—á–∫–∞"
    clean_text = re.sub(r'[^\d.]', '', price_text.replace(',', '.'))
    
    # –†–∞–∑–±–∏–≤–∞–µ–º –ø–æ —Ç–æ—á–∫–∞–º, —á—Ç–æ–±—ã –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ª—É—á–∞–∏ —Ç–∏–ø–∞ "2.662.880.00"
    parts = clean_text.split('.')
    
    # –ï—Å–ª–∏ —Ç–æ—á–µ–∫ –±–æ–ª—å—à–µ –æ–¥–Ω–æ–π, –∑–Ω–∞—á–∏—Ç –µ—Å—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ —Ç—ã—Å—è—á
    if len(parts) > 1:
        # parts[0] - —Ü–µ–ª–∞—è —á–∞—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä "2662")
        # ''.join(parts[1:]) - –æ–±—ä–µ–¥–∏–Ω—è–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ —á–∞—Å—Ç–∏ –∫–∞–∫ –¥—Ä–æ–±–Ω—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä "88000")
        clean_text = parts[0] + '.' + ''.join(parts[1:])
    
    try:
        # –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ —á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π
        return float(clean_text) if clean_text else 0
    except ValueError:
        # –ï—Å–ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)
        print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ü–µ–Ω—ã: '{price_text}' -> '{clean_text}'")
        return 0


# –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –ü–†–û–ì–†–ê–ú–ú–´
# ============================================
def main():
    # –í—ã–≤–æ–¥–∏–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã
    print("üîç –ü–ê–†–°–ï–† –†–ï–ê–õ–¨–ù–û–ì–û –°–ê–ô–¢–ê Torgi.org")
    print("=" * 50)  # –í—ã–≤–æ–¥–∏–º 50 –∑–Ω–∞–∫–æ–≤ "=" –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è
    
    # URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ª–æ—Ç–∞–º–∏ –Ω–∞ torgi.org
    url = "https://torgi.org/index.php?class=Auction&action=List&mod=Open&AuctionType=All"
    
    # –ë–ª–æ–∫ try-except –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫
    try:
        # –ó–ê–ì–†–£–ó–ö–ê –°–¢–†–ê–ù–ò–¶–´
        # ========================================
        # –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∞–π—Ç—ã –±–ª–æ–∫–∏—Ä—É—é—Ç —Ä–æ–±–æ—Ç–æ–≤. User-Agent –≥–æ–≤–æ—Ä–∏—Ç —Å–∞–π—Ç—É:
        # "–Ø –±—Ä–∞—É–∑–µ—Ä Chrome –Ω–∞ Mac, –ø—É—Å—Ç–∏ –º–µ–Ω—è"
        headers = {
            'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36'
        }
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º GET-–∑–∞–ø—Ä–æ—Å –∫ —Å–∞–π—Ç—É (–∫–∞–∫ –µ—Å–ª–∏ –±—ã –æ—Ç–∫—Ä—ã–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
        # timeout=10 - –∂–¥–µ–º –æ—Ç–≤–µ—Ç–∞ –º–∞–∫—Å–∏–º—É–º 10 —Å–µ–∫—É–Ω–¥
        response = requests.get(url, headers=headers, timeout=10)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞ (200 - OK, 404 - –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, 500 - –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞)
        response.raise_for_status()
        
        # BeautifulSoup –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç HTML-–∫–æ–¥ –≤ –¥–µ—Ä–µ–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤
        # 'html.parser' - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∞—Ä—Å–µ—Ä Python
        soup = BeautifulSoup(response.text, 'html.parser')
        print("‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!")
        
        # –°–ü–ò–°–û–ö –î–õ–Ø –•–†–ê–ù–ï–ù–ò–Ø –ù–ê–ô–î–ï–ù–ù–´–• –õ–û–¢–û–í
        # –ö–∞–∂–¥—ã–π –ª–æ—Ç –±—É–¥–µ—Ç —Å–ª–æ–≤–∞—Ä–µ–º —Å –∫–ª—é—á–∞–º–∏: name, region, price, link, price_text
        lots = []
        
        # –ü–û–ò–°–ö –ò –ê–ù–ê–õ–ò–ó –¢–ê–ë–õ–ò–¶
        # ========================================
        print("üîç –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã...")
        
        # find_all('table') –∏—â–µ—Ç –í–°–ï —Ç–µ–≥–∏ <table> –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        tables = soup.find_all('table')
        print(f"üìä –ù–∞–π–¥–µ–Ω–æ —Ç–∞–±–ª–∏—Ü: {len(tables)}")
        
        # –û–±—ã—á–Ω–æ –Ω–∞ —Å–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü, –Ω–∞–º –Ω—É–∂–Ω–∞ –≤—Ç–æ—Ä–∞—è (tables[1])
        # tables[0] —á–∞—Å—Ç–æ –±—ã–≤–∞–µ—Ç –º–µ–Ω—é –∏–ª–∏ —à–∞–ø–∫–∞ —Å–∞–π—Ç–∞
        if len(tables) > 1:
            main_table = tables[1]  # –ë–µ—Ä–µ–º –≤—Ç–æ—Ä—É—é —Ç–∞–±–ª–∏—Ü—É
            
            # –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ (<tr> - table row) –≤ —Ç–∞–±–ª–∏—Ü–µ
            rows = main_table.find_all('tr')
            print(f"üìã –ù–∞–π–¥–µ–Ω–æ —Å—Ç—Ä–æ–∫ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ: {len(rows)}")
            
            # –ü–†–û–•–û–î–ò–ú –ü–û –ö–ê–ñ–î–û–ô –°–¢–†–û–ö–ï –¢–ê–ë–õ–ò–¶–´
            # enumerate –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–º–µ—Ä –∫ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ (i = 0, 1, 2...)
            for i, row in enumerate(rows):
                # –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ —è—á–µ–π–∫–∏ –≤ —Å—Ç—Ä–æ–∫–µ (<td> - table data, <th> - table header)
                cells = row.find_all(['td', 'th'])
                
                # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å—Ç—Ä–æ–∫–∏ —Å –º–∞–ª—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —è—á–µ–µ–∫ (–ø—É—Å—Ç—ã–µ –∏–ª–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏)
                if len(cells) > 5:
                    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏
                    price_text = ""  # –¢–µ–∫—Å—Ç —Ü–µ–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä "2 662 880.00 —Ä—É–±")
                    name = ""        # –ù–∞–∑–≤–∞–Ω–∏–µ –ª–æ—Ç–∞
                    region = ""      # –†–µ–≥–∏–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä "–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª.")
                    link = ""        # –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–æ—Ç–∞
                    
                    # –ê–ù–ê–õ–ò–ó –ö–ê–ñ–î–û–ô –Ø–ß–ï–ô–ö–ò –í –°–¢–†–û–ö–ï
                    # ====================================
                    for cell in cells:
                        # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç –∏–∑ —è—á–µ–π–∫–∏, —É–¥–∞–ª—è—è –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã (strip=True)
                        cell_text = cell.get_text(strip=True)
                        
                        # 1. –ü–û–ò–°–ö –¶–ï–ù–´
                        # ==============================
                        # –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏—â–µ—Ç —à–∞–±–ª–æ–Ω —Ü–µ–Ω—ã:
                        # \d - –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ü–∏—Ñ—Ä—ã
                        # [\d\s]* - –ª—é–±—ã–µ —Ü–∏—Ñ—Ä—ã –∏ –ø—Ä–æ–±–µ–ª—ã
                        # \.? - –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ—á–∫–∞
                        # \d*\.?\d* - –¥–ª—è –¥–µ—Å—è—Ç–∏—á–Ω–æ–π —á–∞—Å—Ç–∏
                        # \s*—Ä—É–± - –ø—Ä–æ–±–µ–ª—ã –∏ —Å–ª–æ–≤–æ "—Ä—É–±"
                        # re.I - –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä (–†–£–ë, —Ä—É–±, –†—É–±)
                        if re.search(r'\d[\d\s]*\.?\d*\.?\d*\s*—Ä—É–±', cell_text, re.I):
                            price_text = cell_text
                        
                        # 2. –ü–û–ò–°–ö –ù–ê–ó–í–ê–ù–ò–Ø –õ–û–¢–ê –ò –°–°–´–õ–ö–ò
                        # ==============================
                        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç—Ä–∏ —É—Å–ª–æ–≤–∏—è:
                        # 1. –¢–µ–∫—Å—Ç –¥–ª–∏–Ω–Ω—ã–π (>30 —Å–∏–º–≤–æ–ª–æ–≤) - —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –æ–ø–∏—Å–∞–Ω–∏–µ
                        # 2. –¶–µ–Ω—É –µ—â–µ –Ω–µ –Ω–∞—à–ª–∏ (—á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–ø—É—Ç–∞—Ç—å)
                        # 3. –ù–µ –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –î–î-–ú–ú-–ì–ì–ì–ì
                        elif len(cell_text) > 30 and not price_text and not re.search(r'\d{2}-\d{2}-\d{4}', cell_text):
                            name = cell_text
                            
                            # –ò—â–µ–º —Å—Å—ã–ª–∫—É –≤–Ω—É—Ç—Ä–∏ —è—á–µ–π–∫–∏
                            # <a href="..."> - —Ç–µ–≥ —Å—Å—ã–ª–∫–∏
                            link_elem = cell.find('a', href=True)
                            if link_elem:
                                # –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ href (–∞–¥—Ä–µ—Å —Å—Å—ã–ª–∫–∏)
                                link_href = link_elem.get('href')
                                if link_href:
                                    # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –≤ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ
                                    if link_href.startswith('/'):
                                        # –°—Å—ã–ª–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å / ‚Üí –¥–æ–±–∞–≤–ª—è–µ–º –¥–æ–º–µ–Ω
                                        link = 'https://torgi.org' + link_href
                                    elif link_href.startswith('?'):
                                        # –°—Å—ã–ª–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å ? ‚Üí –¥–æ–±–∞–≤–ª—è–µ–º –±–∞–∑–æ–≤—ã–π URL
                                        link = 'https://torgi.org/index.php' + link_href
                                    elif link_href.startswith('index.php'):
                                        # –°—Å—ã–ª–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å index.php ‚Üí –¥–æ–±–∞–≤–ª—è–µ–º –¥–æ–º–µ–Ω
                                        link = 'https://torgi.org/' + link_href
                                    else:
                                        # –î—Ä—É–≥–∏–µ —Å–ª—É—á–∞–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä –ø–æ–ª–Ω—ã–π URL)
                                        link = link_href
                        
                        # 3. –ü–û–ò–°–ö –†–ï–ì–ò–û–ù–ê
                        # ==============================
                        # –ò—â–µ–º –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ä–µ–≥–∏–æ–Ω–∞:
                        # [–ê-–Ø][–∞-—è]+ - –∑–∞–≥–ª–∞–≤–Ω–∞—è –±—É–∫–≤–∞, –ø–æ—Ç–æ–º –º–∞–ª–µ–Ω—å–∫–∏–µ ("–ú–æ—Å–∫–æ–≤—Å–∫–∞—è")
                        # \s*–æ–±–ª - –ø—Ä–æ–±–µ–ª—ã –∏ "–æ–±–ª" (–æ–±–ª–∞—Å—Ç—å)
                        # | - –ò–õ–ò
                        # –≥\. - "–≥." (–≥–æ—Ä–æ–¥)
                        # | - –ò–õ–ò
                        # –†–µ—Å–ø - —Ä–µ—Å–ø—É–±–ª–∏–∫–∞
                        elif len(cell_text) < 30 and re.search(r'[–ê-–Ø][–∞-—è]+\s*–æ–±–ª|–≥\.|–†–µ—Å–ø', cell_text):
                            region = cell_text
                    
                    # –°–û–•–†–ê–ù–ï–ù–ò–ï –ù–ê–ô–î–ï–ù–ù–û–ì–û –õ–û–¢–ê
                    # ====================================
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –Ω–∞—à–ª–∏ –∏ —Ü–µ–Ω—É, –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ
                    if price_text and name:
                        # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Ç–µ–∫—Å—Ç —Ü–µ–Ω—ã –≤ —á–∏—Å–ª–æ
                        price = parse_price(price_text)
                        
                        # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –ª–æ—Ç—ã —Å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π
                        if price > 0:
                            # –°–æ–∑–¥–∞–µ–º —Å–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –ª–æ—Ç–∞
                            # –°–ª–æ–≤–∞—Ä—å (dict) - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ "–∫–ª—é—á: –∑–Ω–∞—á–µ–Ω–∏–µ"
                            lot = {
                                'name': name,          # –ù–∞–∑–≤–∞–Ω–∏–µ
                                'region': region,      # –†–µ–≥–∏–æ–Ω (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º)
                                'price': price,        # –¶–µ–Ω–∞ –∫–∞–∫ —á–∏—Å–ª–æ
                                'link': link,          # –°—Å—ã–ª–∫–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π)
                                'price_text': price_text  # –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç —Ü–µ–Ω—ã
                            }
                            
                            # –ü–†–û–í–ï–†–ö–ê –ù–ê –î–£–ë–õ–ò–ö–ê–¢–´
                            # ==========================
                            # any() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç True –µ—Å–ª–∏ –•–û–¢–Ø –ë–´ –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ lots
                            # —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—é –≤ —Å–∫–æ–±–∫–∞—Ö
                            # –£—Å–ª–æ–≤–∏–µ: l['name'] == name and l['price'] == price
                            # "–µ—Å—Ç—å –ª–æ—Ç —Å —Ç–∞–∫–∏–º –∂–µ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ò —Ç–∞–∫–æ–π –∂–µ —Ü–µ–Ω–æ–π"
                            if not any(l['name'] == name and l['price'] == price for l in lots):
                                # –î–æ–±–∞–≤–ª—è–µ–º –ª–æ—Ç –≤ —Å–ø–∏—Å–æ–∫
                                lots.append(lot)
                                # –í—ã–≤–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–π–¥–µ–Ω–Ω–æ–º –ª–æ—Ç–µ
                                # {price:,.2f} - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –∑–∞–ø—è—Ç—ã–µ –∫–∞–∫ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ —Ç—ã—Å—è—á, 2 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏
                                # {name[:50]} - –ø–µ—Ä–≤—ã–µ 50 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞–∑–≤–∞–Ω–∏—è
                                print(f"‚úÖ –õ–æ—Ç {len(lots)}: {price:,.2f} —Ä—É–± - {name[:50]}...")
        
        # –í–´–í–û–î –†–ï–ó–£–õ–¨–¢–ê–¢–û–í
        # ========================================
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –Ω–∞—à–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ª–æ—Ç
        if lots:
            # –°–û–†–¢–ò–†–û–í–ö–ê –õ–û–¢–û–í –ü–û –¶–ï–ù–ï
            # ==========================
            # sorted() —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫
            # key=lambda x: x['price'] - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –ø–æ–ª—é 'price'
            # lambda x: x['price'] - –∫–æ—Ä–æ—Ç–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è: "–≤–æ–∑—å–º–∏ x, –≤–µ—Ä–Ω–∏ x['price']"
            # reverse=True - –ø–æ —É–±—ã–≤–∞–Ω–∏—é (–æ—Ç –±–æ–ª—å—à–µ–π —Ü–µ–Ω—ã –∫ –º–µ–Ω—å—à–µ–π)
            sorted_lots = sorted(lots, key=lambda x: x['price'], reverse=True)
            
            # –í–´–í–û–î –í–°–ï–• –õ–û–¢–û–í
            # ==========================
            print(f"\nüìä –†–ï–ê–õ–¨–ù–´–ï –õ–û–¢–´ –° –°–ê–ô–¢–ê: –ù–∞–π–¥–µ–Ω–æ {len(sorted_lots)} –ª–æ—Ç–æ–≤")
            print("=" * 100)  # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è
            
            # enumerate(sorted_lots, 1) –¥–∞–µ—Ç –ø–∞—Ä—ã: (–Ω–æ–º–µ—Ä, –ª–æ—Ç)
            # 1 - –Ω–∞—á–∞—Ç—å –Ω—É–º–µ—Ä–∞—Ü–∏—é —Å 1 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å 0)
            for i, lot in enumerate(sorted_lots, 1):
                # {i:2d} - –Ω–æ–º–µ—Ä —à–∏—Ä–∏–Ω–æ–π 2 —Å–∏–º–≤–æ–ª–∞, –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é
                # {lot['price']:12,.2f} - —Ü–µ–Ω–∞ —à–∏—Ä–∏–Ω–æ–π 12 —Å–∏–º–≤–æ–ª–æ–≤, —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏ —Ç—ã—Å—è—á, 2 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏
                print(f"{i:2d}. üí∞ {lot['price']:12,.2f} —Ä—É–±")
                
                # –í—ã–≤–æ–¥–∏–º —Ä–µ–≥–∏–æ–Ω, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
                if lot['region']:
                    print(f"    üìç {lot['region']}")
                
                # {lot['name'][:80]} - –ø–µ—Ä–≤—ã–µ 80 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞–∑–≤–∞–Ω–∏—è
                print(f"    üè∑  {lot['name'][:80]}...")
                
                # –í—ã–≤–æ–¥–∏–º —Å—Å—ã–ª–∫—É, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å
                if lot['link']:
                    print(f"    üîó {lot['link']}")
                
                # –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –º–µ–∂–¥—É –ª–æ—Ç–∞–º–∏
                print("-" * 100)
            
            # –§–ò–õ–¨–¢–†–ê–¶–ò–Ø –ü–û –¶–ï–ù–ï
            # ==========================
            print("\nüéØ –§–ò–õ–¨–¢–†–ê–¶–ò–Ø –ü–û –¶–ï–ù–ï")
            
            # –ë–ª–æ–∫ try-except –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤–≤–æ–¥–∞
            try:
                # –ü–û–õ–£–ß–ï–ù–ò–ï –ì–†–ê–ù–ò–¶ –§–ò–õ–¨–¢–†–ê–¶–ò–ò –û–¢ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
                # ==========================================
                # input() –∂–¥–µ—Ç –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                # .strip() —É–¥–∞–ª—è–µ—Ç –ø—Ä–æ–±–µ–ª—ã –≤ –Ω–∞—á–∞–ª–µ –∏ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫–∏
                min_input = input("–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ (—Ä—É–±, Enter - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å): ").strip()
                max_input = input("–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ (—Ä—É–±, Enter - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å): ").strip()
                
                # –ü–†–ï–û–ë–†–ê–ó–û–í–ê–ù–ò–ï –í–í–û–î–ê –í –ß–ò–°–õ–ê
                # ==========================================
                # float(min_input) if min_input else None
                # –ï—Å–ª–∏ min_input –Ω–µ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —á–∏—Å–ª–æ
                # –ò–Ω–∞—á–µ ‚Üí None (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è)
                min_price = float(min_input) if min_input else None
                max_price = float(max_input) if max_input else None
                
                # –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –§–ò–õ–¨–¢–†–ê
                # ==========================================
                filtered_lots = []  # –°–ø–∏—Å–æ–∫ –¥–ª—è –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ—Ç–æ–≤
                
                for lot in sorted_lots:
                    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ª–æ—Ç, –µ—Å–ª–∏ –µ–≥–æ —Ü–µ–Ω–∞ –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π
                    if min_price and lot['price'] < min_price:
                        continue  # continue –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Ü–∏–∫–ª–∞
                    
                    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ª–æ—Ç, –µ—Å–ª–∏ –µ–≥–æ —Ü–µ–Ω–∞ –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π
                    if max_price and lot['price'] > max_price:
                        continue
                    
                    # –ï—Å–ª–∏ –ª–æ—Ç –ø—Ä–æ—à–µ–ª –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ - –¥–æ–±–∞–≤–ª—è–µ–º –≤ filtered_lots
                    filtered_lots.append(lot)
                
                # –í–´–í–û–î –û–¢–§–ò–õ–¨–¢–†–û–í–ê–ù–ù–´–• –†–ï–ó–£–õ–¨–¢–ê–¢–û–í
                # ==========================================
                if filtered_lots:
                    print(f"\nüîç –û–¢–§–ò–õ–¨–¢–†–û–í–ê–ù–û –õ–û–¢–û–í: {len(filtered_lots)}")
                    print("=" * 100)
                    
                    for i, lot in enumerate(filtered_lots, 1):
                        print(f"{i}. üí∞ {lot['price']:,.2f} —Ä—É–±")
                        
                        if lot['region']:
                            print(f"   üìç {lot['region']}")
                        
                        # {lot['name'][:70]} - –ø–µ—Ä–≤—ã–µ 70 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞–∑–≤–∞–Ω–∏—è
                        print(f"   üè∑  {lot['name'][:70]}...")
                        
                        if lot['link']:
                            print(f"   üîó {lot['link']}")
                        
                        print("-" * 100)
                else:
                    print("‚ùå –ù–µ—Ç –ª–æ—Ç–æ–≤ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ —Ü–µ–Ω")
                    
            except ValueError:
                # –û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª –Ω–µ —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä "abc")
                print("‚ùå –û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞ —Ü–µ–Ω")
                
        else:
            # –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ –ª–æ—Ç–∞
            print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –ª–æ—Ç—ã –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö")
            
    # –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö
    # ========================================
    except requests.exceptions.RequestException as e:
        # –û—à–∏–±–∫–∏ —Å–µ—Ç–∏: –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, —Å–∞–π—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Ç–∞–π–º–∞—É—Ç
        print(f"‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: {e}")
    except Exception as e:
        # –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
        print(f"‚ùå –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")


# –¢–û–ß–ö–ê –í–•–û–î–ê –ü–†–û–ì–†–ê–ú–ú–´
# ============================================
# __name__ - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è Python
# –ï—Å–ª–∏ —Ñ–∞–π–ª –∑–∞–ø—É—â–µ–Ω –Ω–∞–ø—Ä—è–º—É—é: __name__ == "__main__"
# –ï—Å–ª–∏ —Ñ–∞–π–ª –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ –º–æ–¥—É–ª—å: __name__ == "–∏–º—è_—Ñ–∞–π–ª–∞"
# –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª –∏ –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º—É, –∏ –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
if __name__ == "__main__":
    main()
